language: 
  - cpp
  - python

cpp: c++11

python: "3.6"

compiler: g++ 

#before_install: |
#  if ! [ -f sdsl-lite/ ]; then
#    git clone https://github.com/simongog/sdsl-lite.git;
#    cd sdsl-lite/;
#    ./install.sh;
#  fi

# cache:
#  directories:
#    - sdsl-lite/

install:
  - cd ~/
  - mkdir include
  - git clone https://github.com/simongog/sdsl-lite.git
  - git clone https://github.com/martinmoene/lest.git
  - cd sdsl-lite
  - ./install.sh
  - cd ../
  - cp -r ./sdsl-lite/include/sdsl ./include
  - cp -r ./lest/include/lest ./include

script:
  - cd $TRAVIS_BUILD_DIR #là où est contenu notre code ( pas  sdsl-lite )
  - python3 gen.py -k 2 -n 16 | sort > sorted_kmers.txt
  - g++ -std=c++11 -Dlest_FEATURE_AUTO_REGISTER=1 -Dlest_FEATURE_COLOURISE=1 -O3 -DNDEBUG -I ~/include -L ~/lib -o Tests.exe Tests.cpp ConwayBromageLib.cpp -lsdsl -ldivsufsort -ldivsufsort64
  - ./Tests.exe 
